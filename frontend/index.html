<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal Kernel Dashboard</title>
    
    <!-- é¢„åŠ è½½å…³é”®èµ„æº -->
    <link rel="modulepreload" href="/src/main.js">
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    
    <!-- å…³é”®æ¸²æŸ“è·¯å¾„çš„å†…è” CSS -->
    <style>
      /* é˜²æ­¢å†…å®¹é—ªçƒ */
      #app { 
        opacity: 0; 
        transition: opacity 0.3s ease-in-out;
      }
      #app.loaded { 
        opacity: 1; 
      }
      
      /* åŠ è½½æŒ‡ç¤ºå™¨æ ·å¼ */
      .loading-indicator {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        font-size: 18px;
        color: #666;
      }
      
      .loading-indicator::after {
        content: '';
        display: block;
        width: 40px;
        height: 40px;
        margin: 20px auto;
        border: 3px solid #f3f3f3;
        border-top: 3px solid #3498db;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }
      
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
      
      /* é”™è¯¯è¾¹ç•Œæ ·å¼ */
      .error-boundary {
        padding: 40px;
        text-align: center;
        max-width: 600px;
        margin: 100px auto;
      }
      
      .error-boundary h1 {
        color: #e74c3c;
        margin-bottom: 20px;
      }
      
      .error-boundary details {
        margin-top: 20px;
        text-align: left;
        background: #f5f5f5;
        padding: 10px;
        border-radius: 4px;
      }
      
      .error-boundary button {
        margin-top: 20px;
        padding: 10px 20px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
      }
      
      .error-boundary button:hover {
        background: #2980b9;
      }
    </style>
    
    <!-- æ ·å¼è¡¨å»¶è¿ŸåŠ è½½ -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preload" href="components/onboarding/onboarding.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="components/plugin-selector/plugin-selector.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="components/plugin-creator/plugin-creator.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="components/debug-console/debug-console.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    
    <!-- æ ·å¼è¡¨åŠ è½½å›é€€ -->
    <noscript>
      <link rel="stylesheet" href="components/onboarding/onboarding.css">
      <link rel="stylesheet" href="components/plugin-selector/plugin-selector.css">
      <link rel="stylesheet" href="components/plugin-creator/plugin-creator.css">
      <link rel="stylesheet" href="components/debug-console/debug-console.css">
    </noscript>
</head>
<body>
    <div id="app">
        <!-- åŠ è½½æŒ‡ç¤ºå™¨ -->
        <div class="loading-indicator">
            <div>æ­£åœ¨åŠ è½½åº”ç”¨...</div>
        </div>
        
        <header id="app-header">
            <h1>Minimal Kernel Dashboard</h1>
            <div class="header-actions">
                <button id="add-widget">æ·»åŠ æ’ä»¶</button>
                <button id="layout-settings">å¸ƒå±€è®¾ç½®</button>
                <button id="debug-console" title="æ’ä»¶è°ƒè¯•æ§åˆ¶å°">ğŸ”§ è°ƒè¯•</button>
                <button id="show-diagnostics" title="æ˜¾ç¤ºè¯Šæ–­ä¿¡æ¯">ğŸ¥ è¯Šæ–­</button>
            </div>
        </header>
        
        <main id="dashboard-container">
            <div id="dashboard-grid" class="grid-container">
                <!-- æ’ä»¶å®¹å™¨å°†åŠ¨æ€æ’å…¥è¿™é‡Œ -->
                <div style="padding: 40px; text-align: center; color: #8E8E93;">
                    <h2>æ¬¢è¿ä½¿ç”¨ Minimal Kernel Dashboard</h2>
                    <p>ç‚¹å‡»ä¸Šæ–¹"æ·»åŠ æ’ä»¶"æŒ‰é’®å¼€å§‹ä½¿ç”¨</p>
                </div>
            </div>
        </main>
        
        <footer id="app-footer">
            <div class="status-bar">
                <span id="plugin-count">æ’ä»¶: 0</span>
                <span id="memory-usage">å†…å­˜: --</span>
                <span id="system-time">--:--:--</span>
            </div>
        </footer>
    </div>

    <!-- è¯Šæ–­ä¿¡æ¯é¢æ¿ -->
    <div id="diagnostics-panel" style="display: none; position: fixed; bottom: 0; left: 0; right: 0; background: #222; color: #fff; padding: 20px; max-height: 300px; overflow-y: auto; font-family: monospace; font-size: 12px;">
        <button onclick="document.getElementById('diagnostics-panel').style.display='none'" style="position: absolute; top: 5px; right: 5px; background: #444; color: #fff; border: none; padding: 5px 10px; cursor: pointer;">å…³é—­</button>
        <h3>è¯Šæ–­ä¿¡æ¯</h3>
        <div id="diagnostics-content"></div>
    </div>

    <script type="module" src="/src/main.js"></script>
</body>
</html>